(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{257:function(e,t,n){"use strict";n.r(t);n(80),n(79),n(197),n(130),n(218),n(132),n(220);var r=n(87),i=n(6),a=i.c.div.withConfig({componentId:"upa50g-0"})(["padding:9px 18px;width:100%;font-size:1.5rem;color:red;"]),o=n(0),c=n(12),l=n(40),u=(n(133),n(134),n(135),n(137),n(138),n(131),n(139),n(83)),d=(n(196),n(224)),s=function(e){var t=e.transitionDirection,n="next"===t?"translateX(100%)":"prev"===t?"translateX(-100%)":"translateX(0)",r="next"===t?"translateX(-100%)":"prev"===t?"translateX(100%)":"translateX(0)",i=Object(d.b)(e.item,(function(e){return e.id}),{from:function(){return{position:"absolute",opacity:0,width:"100%",height:"100%",transform:n}},enter:function(){return{opacity:1,transform:"translateX(0)"}},leave:function(){return{transform:r,opacity:0}},unique:!0,reset:!0});return o.createElement(o.Fragment,null,i.map((function(t){return o.createElement(d.a.div,{style:t.props,key:t.key},e.children(t.item))})))},m=i.c.button.withConfig({componentId:"pvmre5-0"})(["width:1.5rem;height:1.5rem;border:none;margin:1.5rem;background:rgba(0,0,0,0.75);box-shadow:0px 0px 5px 1px rgba(0,0,0,0.75);position:relative;transform:scale(1.5);::before,::after{content:'';background-color:white;width:0.25rem;height:1.5rem;position:absolute;left:.7rem;top:0px;box-shadow:0px 0px 28px -3px rgba(0,0,0,0.75);}::before{transform:rotate(45deg);}::after{transform:rotate(-45deg);}"]),g=n(82),p=n(225),f=n(81),v=(n(136),n(226));function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var w=function(e){var t=h(o.useState(!1),2),n=t[0],r=t[1],i=h(Object(v.a)({triggerOnce:!0,rootMargin:e.rootMargin||"200px 0px"}),2),a=i[0],c=i[1];return e.wrapper({ref:a,isLoaded:n,children:o.createElement(o.Fragment,null,!n&&e.loadingPlaceholder,c&&e.children({setLoaded:r,isLoaded:n}))})},b=n(38),y=i.c.div.withConfig({componentId:"sc-1bcli0d-0"})(["margin:1px;flex-grow:1;overflow:hidden;display:flex;height:200px;@media only screen and (max-width:","){&{height:100px;}}pointer-events:",";picture{min-width:100%;}img{object-fit:cover;min-width:100%;height:100%;}"],b.b.md,(function(e){return e.disable?"none":"initial"})),x=i.c.div.withConfig({componentId:"sc-1bcli0d-1"})(["position:absolute;display:flex;justify-content:center;align-items:center;width:100%;height:100%;padding:2rem;picture{height:100%;}img{height:100%;max-width:100%;object-fit:contain;}"]),E=i.c.picture.withConfig({componentId:"sc-1bcli0d-2"})(["opacity:1;position:relative;transition:opacity 0.2s ease-in-out;",""],(function(e){return e.isHidden&&Object(i.b)(["position:absolute;opacity:0;"])})),P=function(e){var t,n=e.imageProps,r=o.useState(Math.random()+""+Math.random()),i=null===(t=n.srcSet)||void 0===t?void 0:t.map((function(e,t){return o.createElement("source",{srcSet:e.src,media:e.media,key:"".concat(r,"_").concat(t)})}));return o.createElement(w,{loadingPlaceholder:e.loadingPlaceholder,wrapper:e.wrapper},(function(e){var t=e.setLoaded,r=e.isLoaded;return o.createElement(E,{onLoad:function(){return t(!0)},isHidden:!r},i,o.createElement("img",{src:n.defaultImgSrc,alt:n.alt}))}))},I=function(e){var t,n,r,i,a=e.image.images.fixed_height,c=e.image.images.fixed_height_small,l=e.image.images.original,u={alt:e.image.title,defaultImgSrc:null===(t=c)||void 0===t?void 0:t.url,srcSet:[{src:null===(n=l)||void 0===n?void 0:n.url,media:"(min-width: ".concat(+l.width-40,"px)")},{src:null===(r=a)||void 0===r?void 0:r.url,media:"(min-width: ".concat(+((null===(i=a)||void 0===i?void 0:i.width)||0)-40,"px)")}]};return o.createElement(P,{loadingPlaceholder:o.createElement(O,null),wrapper:function(e){return o.createElement(x,Object.assign({},e))},imageProps:u})},S=(n(201),n(203),n(205),n(206),function(e){var t,n,r,i=e.image.previewURL,a=e.image.webformatURL,c=a.replace(/_\d{3}\./,"_180."),l=a.replace(/_\d{3}\./,"_340."),u=a.replace(/_\d{3}\./,"_960."),d={alt:null===(r=null===(n=null===(t=e)||void 0===t?void 0:t.image)||void 0===n?void 0:n.tags)||void 0===r?void 0:r.split(",").map((function(e){return e.trim()})).reduce((function(e,t){return"".concat(e," ").concat(t)}),""),defaultImgSrc:i,srcSet:[{src:u,media:"(min-width: 920px)"},{src:a,media:"(min-width: 600px)"},{src:l,media:"(min-width: 300px)"},{src:c,media:"(min-width: 140px)"}]};return o.createElement(P,{loadingPlaceholder:o.createElement(O,null),wrapper:function(e){return o.createElement(x,Object.assign({},e))},imageProps:d})});function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var q=Object(i.c)((function(e){var t=e.previewImg,n=e.className,r=e.previewNextHandler,i=e.previewPrevHandler,a=Object(g.b)(),c=j(o.useState(void 0),2),l=c[0],u=c[1];o.useEffect((function(){var e,t=document.querySelector("body");return null===(e=t)||void 0===e||e.classList.add("noScroll"),function(){var e;null===(e=t)||void 0===e||e.classList.remove("noScroll")}}),[]);var d=Object(p.a)({onSwipedLeft:function(){u("next"),r()},onSwipedRight:function(){u("prev"),i()}});return o.createElement("div",Object.assign({className:n},d),o.createElement(L,null,o.createElement(m,{onClick:function(){return a(f.a.actions.setPreview(void 0))}})),o.createElement(s,{item:t,transitionDirection:l},(function(e){return o.createElement(_,{previewImg:e})})))})).withConfig({componentId:"wqe1cf-0"})(["background-color:rgba(0,0,0,.95);position:fixed;top:0px;left:0px;height:100vh;width:100%;z-index:100;"]),O=function(){return o.createElement(r.a,{position:"relative"},o.createElement(u.a,{mode:"light"}))},L=i.c.div.withConfig({componentId:"wqe1cf-1"})(["position:absolute;width:100%;height:2rem;display:flex;justify-content:flex-end;z-index:2;"]),_=function(e){var t,n;return o.createElement(o.Fragment,null,"giphy"===(null===(t=e.previewImg)||void 0===t?void 0:t.imgProvider)&&o.createElement(I,{image:e.previewImg}),"pixabay"===(null===(n=e.previewImg)||void 0===n?void 0:n.imgProvider)&&o.createElement(S,{image:e.previewImg}))},M=i.c.div.withConfig({componentId:"v8asw1-0"})(["position:relative;display:flex;justify-content:center;align-items:center;min-width:500px;width:100%;height:100%;@media only screen and (max-width:","){&{min-width:200px;}}"],b.b.md),k=function(e){var t,n,r=Object(g.b)(),i=e.image.images.fixed_height_still,a=e.image.images.fixed_height_small_still,c={alt:e.image.title,defaultImgSrc:null===(t=a)||void 0===t?void 0:t.url,srcSet:[{src:null===(n=i)||void 0===n?void 0:n.url,media:"(min-width: 600px)"}]},l=function(){return r(f.a.actions.setPreview(e.imageIdx))};return o.createElement(P,{loadingPlaceholder:o.createElement(M,{children:o.createElement(u.a,null)}),imageProps:c,wrapper:function(t){return o.createElement(y,Object.assign({},t,{disable:e.disable,onClick:l}))}})};function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var C=function(e){var t=Object(g.b)(),n=N(o.useState(!1),2),r=n[0],i=n[1];return o.createElement(w,{loadingPlaceholder:o.createElement(M,{children:o.createElement(u.a,null)}),wrapper:function(e){return o.createElement(y,Object.assign({},e))},rootMargin:"600px 0px"},(function(e){return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e),r||(i(!0),t(f.a.actions.loadNextPage())),null}))},A=function(e){var t,n,r,i=e.image.previewURL,a=e.image.webformatURL.replace(/_\d{3}\./,"_180."),c={alt:null===(r=null===(n=null===(t=e)||void 0===t?void 0:t.image)||void 0===n?void 0:n.tags)||void 0===r?void 0:r.split(",").map((function(e){return e.trim()})).reduce((function(e,t){return"".concat(e," ").concat(t)}),""),defaultImgSrc:i,srcSet:[{src:a,media:"(min-width: 600px)"}]},l=Object(g.b)(),d=function(){return l(f.a.actions.setPreview(e.imageIdx))};return o.createElement(P,{loadingPlaceholder:o.createElement(M,{children:o.createElement(u.a,null)}),imageProps:c,wrapper:function(t){return o.createElement(y,Object.assign({},t,{disable:e.disable,onClick:d}))}})},R=Object(i.c)((function(e){var t,n=null===(t=e.images)||void 0===t?void 0:t.map((function(t,n){return"giphy"===t.imgProvider?o.createElement(k,{image:t,key:"giphy_".concat(t.id),disable:e.disable,imageIdx:n}):o.createElement(A,{image:t,key:"pixabay_".concat(t.id),disable:e.disable,imageIdx:n})}));return o.createElement("div",{className:e.className},n,e.canLoadMore&&o.createElement(C,{key:"loadMore_".concat(e.images.length,"_").concat(e.query.q)}))})).withConfig({componentId:"sc-10yggbc-0"})(["display:flex;flex-wrap:wrap;flex-direction:row;overflow-x:hidden;position:relative;left:0px;right:0px;margin:0px 10px;&::after{content:'';flex-grow:999999999;height:0;}"]),H=(n(140),n(208),n(109)),U=n(110),X=n(39),F=n(231),T=n.n(F),z=Object(i.c)(X.b).withConfig({componentId:"f29lmv-0"})(["width:100%;display:flex;flex-direction:row;padding:10px 10px;background-color:white;"]),D=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function c(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((r=r.apply(e,t||[])).next())}))},J=function(e){return o.createElement(T.a,{style:{backgroundColor:"white",zIndex:10}},o.createElement(X.c,{initialValues:{q:e.query.q},onSubmit:function(t,n){n.setSubmitting;return D(void 0,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.onSearchSubmitted({q:t.q});case 1:case"end":return n.stop()}}),n)})))}},(function(e){var t=e.isSubmitting;return o.createElement(z,null,o.createElement(X.a,{name:"q",as:U.a,"aria-label":"Search"}),o.createElement(H.a,{type:"submit",disabled:t,disableLeftBorder:!0},"Search"))})))};n(147),n(146),n(235);n(236),n(237),n(238),n(239);var Q=function(e,t){var n=+e.total;return Math.floor(n/t)+(n%t>0?1:0)},B=function(e,t){var n=+e.pagination.total_count||+e.pagination.count;return Math.floor(n/t)+(n%t>0?1:0)},V=n(240),G=n.n(V),K=n(119),W=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function c(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((r=r.apply(e,t||[])).next())}))};function Y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Z=function(e){var t,n,r,i,a,c=(a=o.useRef(!0),o.useEffect((function(){return a.current=!0,function(){a.current=!1}}),[]),{isMounted:function(){return a.current}}).isMounted,l=Object(g.c)((function(e){return e.galleryItems})),u=l.loadingMeta,d=l.errors,s=l.images,m=Object(g.b)(),p=function(){var e,t,n;return c()&&(null===(t=null===(e=u)||void 0===e?void 0:e.query)||void 0===t?void 0:t.q)===(null===(n=v.current.query)||void 0===n?void 0:n.q)},v=o.useRef({query:{q:void 0},loadingsNo:0});o.useEffect((function(){m(f.a.actions.newQuery(e.query)),v.current.query=e.query,v.current.loadingsNo=0}),[e.query.q]),o.useEffect((function(){var t;void 0!==(null===(t=u.query)||void 0===t?void 0:t.q)&&$(e,u,v,p,m)}),[null===(t=u.query)||void 0===t?void 0:t.q,u.pageIdx]);var h=void 0===(null===(n=u)||void 0===n?void 0:n.limit)||Math.max(u.limit.giphyPages,u.limit.pixabayPages)>((null===(r=u)||void 0===r?void 0:r.pageIdx)||0),w=v.current.loadingsNo>0;return{images:s,hasMorePages:h,pageIdx:null===(i=u)||void 0===i?void 0:i.pageIdx,isLoading:w,errors:d,triggerRefreshManually:function(){var t;p()&&void 0!==(null===(t=u.query)||void 0===t?void 0:t.q)&&$(e,u,v,p,m)}}};function $(e,t,n,r,i){var a=function(e,t){var n,r,i,a,o=t.pageIdx,c=function(e){return null==e?0:e>o?o:void 0};return{q:null===(r=null===(n=t)||void 0===n?void 0:n.query)||void 0===r?void 0:r.q,pixabay_offset:c(null===(i=t.limit)||void 0===i?void 0:i.pixabayPages)+"",giphy_offset:c(null===(a=t.limit)||void 0===a?void 0:a.giphyPages)+"",perPageLimit:e.perPageLimit+"",services:"both"}}(e,t);n.current.loadingsNo++,function(e){return W(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/api/images/query".concat(K.a.makeQueryFromMap(e)),t.abrupt("return",G.a.get(n));case 2:case"end":return t.stop()}}),t)})))}(a).then((function(t){if(r()){var a=t.data.providers.map((function(e){return"pixabay"===e.imgProvider?e.hits.map((function(t){return Object.assign({imgProvider:e.imgProvider},t)})):"giphy"===e.imgProvider?e.data.map((function(t){return Object.assign({imgProvider:e.imgProvider},t)})):[]})).reduce((function(e,t){return[].concat(Y(e),Y(t))}),[]),o=function(e,t){var n={pixabayPages:0,giphyPages:0};return e.map((function(e){"pixabay"===e.imgProvider?n.pixabayPages=Q(e,t):"giphy"===e.imgProvider&&(n.giphyPages=B(e,t))})),n}(t.data.providers,e.perPageLimit);n.current.loadingsNo--,i(f.a.actions.itemsLoaded({images:a,limit:o}))}})).catch((function(e){var t;r()&&(t="string"==typeof e.message?[e.message]:[e.toString()],n.current.loadingsNo=0,i(f.a.actions.loadingErrors(t)))}))}t.default=function(e){var t={q:new URLSearchParams(e.routeProps.location.search).get("q")||void 0},n=Object(c.f)(),r=Z({perPageLimit:10,query:t}),i=r.images,a=r.isLoading,u=r.hasMorePages,d=r.errors,s=r.triggerRefreshManually,m=function(e){var t,n,r=Object(g.b)(),i=Object(g.c)((function(e){return e.galleryItems})),a=i.loadingMeta,o=i.images,c=i.previewIdx,l=void 0===(null===(t=a)||void 0===t?void 0:t.limit)||Math.max(a.limit.giphyPages,a.limit.pixabayPages)>((null===(n=a)||void 0===n?void 0:n.pageIdx)||0);return{previewIdx:c,previewPrevHandler:function(){r(f.a.actions.previewMove("prev"))},previewNextHandler:function(){o.length<(c||0)+e.perPageLimit&&l&&r(f.a.actions.loadNextPage()),r(f.a.actions.previewMove("next"))}}}({perPageLimit:10}),p=m.previewIdx,v=m.previewNextHandler,h=m.previewPrevHandler,w=d&&d.length>0;return o.createElement(o.Fragment,null,o.createElement(J,{query:t,onSearchSubmitted:function(e){e.q===t.q&&w&&s(),n.push(l.a.galleryUrl(e))}}),w&&o.createElement(ee,{errors:d}),!w&&i.length>0&&o.createElement(R,{images:i,canLoadMore:!a&&u,query:t,disable:void 0!==p}),void 0!==p&&o.createElement(q,{previewImg:i[p],previewNextHandler:v,previewPrevHandler:h}))};var ee=function(e){var t=e.errors;return o.createElement(r.a,{position:"relative"},o.createElement(a,null,t||"Unknown error"))}}}]);