(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{253:function(e,t,r){"use strict";r.r(t);r(77),r(76),r(193),r(130),r(215),r(131),r(217);var n=r(87),i=r(7),a=i.c.div.withConfig({componentId:"helyvr-0"})(["padding:9px 18px;width:100%;font-size:1.5rem;color:red;"]),o=r(0),c=r(13),l=r(41),u=(r(132),r(133),r(134),r(136),r(137),r(191),r(138),r(81)),d=(r(192),r(221)),s=function(e){var t=e.transitionDirection,r="next"===t?"translateX(100%)":"prev"===t?"translateX(-100%)":"translateX(0)",n="next"===t?"translateX(-100%)":"prev"===t?"translateX(100%)":"translateX(0)",i=Object(d.b)(e.item,(function(e){return e.id}),{from:function(){return{position:"absolute",opacity:0,width:"100%",height:"100%",transform:r}},enter:function(){return{opacity:1,transform:"translateX(0)"}},leave:function(){return{transform:n,opacity:0}},unique:!0,reset:!0});return o.createElement(o.Fragment,null,i.map((function(t){return o.createElement(d.a.div,{style:t.props,key:t.key},e.children(t.item))})))},m=i.c.button.withConfig({componentId:"sc-2t927c-0"})(["width:1.5rem;height:1.5rem;border:none;margin:1.5rem;background:rgba(0,0,0,0.75);box-shadow:0px 0px 5px 1px rgba(0,0,0,0.75);position:relative;transform:scale(1.5);::before,::after{content:'';background-color:white;width:0.25rem;height:1.5rem;position:absolute;left:.7rem;top:0px;box-shadow:0px 0px 28px -3px rgba(0,0,0,0.75);}::before{transform:rotate(45deg);}::after{transform:rotate(-45deg);}"]),p=r(79),g=r(222),f=r(78),v=(r(135),r(223));function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var y=function(e){var t=h(o.useState(!1),2),r=t[0],n=t[1],i=h(Object(v.a)({triggerOnce:!0,rootMargin:e.rootMargin||"200px 0px"}),2),a=i[0],c=i[1];return e.wrapper({ref:a,isLoaded:r,children:o.createElement(o.Fragment,null,!r&&e.loadingPlaceholder,c&&e.children({setLoaded:n,isLoaded:r}))})},b=r(39),w=i.c.div.withConfig({componentId:"zvxxrm-0"})(["margin:1px;flex-grow:1;overflow:hidden;display:flex;height:200px;@media only screen and (max-width:","){&{height:100px;}}pointer-events:",";picture{min-width:100%;}img{object-fit:cover;min-width:100%;height:100%;}"],b.b.md,(function(e){return e.disable?"none":"initial"})),x=i.c.div.withConfig({componentId:"zvxxrm-1"})(["position:absolute;display:flex;justify-content:center;align-items:center;width:100%;height:100%;padding:2rem;picture{height:100%;}img{height:100%;max-width:100%;object-fit:contain;}"]),P=i.c.picture.withConfig({componentId:"zvxxrm-2"})(["opacity:1;position:relative;transition:opacity 0.2s ease-in-out;",""],(function(e){return e.isHidden&&Object(i.b)(["position:absolute;opacity:0;"])})),E=function(e){var t,r=e.imageProps,n=o.useState(Math.random()+""+Math.random()),i=null===(t=r.srcSet)||void 0===t?void 0:t.map((function(e,t){return o.createElement("source",{srcSet:e.src,media:e.media,key:"".concat(n,"_").concat(t)})}));return o.createElement(y,{loadingPlaceholder:e.loadingPlaceholder,wrapper:e.wrapper},(function(e){var t=e.setLoaded,n=e.isLoaded;return o.createElement(P,{onLoad:function(){return t(!0)},isHidden:!n},i,o.createElement("img",{src:r.defaultImgSrc,alt:r.alt}))}))},j=function(e){var t=e.image.images.fixed_height,r=e.image.images.fixed_height_small,n=e.image.images.original,i={alt:e.image.title,defaultImgSrc:null==r?void 0:r.url,srcSet:[{src:null==n?void 0:n.url,media:"(min-width: ".concat(+n.width-40,"px)")},{src:null==t?void 0:t.url,media:"(min-width: ".concat(+((null==t?void 0:t.width)||0)-40,"px)")}]};return o.createElement(E,{loadingPlaceholder:o.createElement(q,null),wrapper:function(e){return o.createElement(x,Object.assign({},e))},imageProps:i})},O=(r(197),r(200),r(202),r(203),function(e){var t,r,n=e.image.previewURL,i=e.image.webformatURL,a=i.replace(/_\d{3}\./,"_180."),c=i.replace(/_\d{3}\./,"_340."),l=i.replace(/_\d{3}\./,"_960."),u={alt:null==e?void 0:null===(t=e.image)||void 0===t?void 0:null===(r=t.tags)||void 0===r?void 0:r.split(",").map((function(e){return e.trim()})).reduce((function(e,t){return"".concat(e," ").concat(t)}),""),defaultImgSrc:n,srcSet:[{src:l,media:"(min-width: 920px)"},{src:i,media:"(min-width: 600px)"},{src:c,media:"(min-width: 300px)"},{src:a,media:"(min-width: 140px)"}]};return o.createElement(E,{loadingPlaceholder:o.createElement(q,null),wrapper:function(e){return o.createElement(x,Object.assign({},e))},imageProps:u})});function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var I=Object(i.c)((function(e){var t=e.previewImg,r=e.className,n=e.previewNextHandler,i=e.previewPrevHandler,a=Object(p.b)(),c=S(o.useState(void 0),2),l=c[0],u=c[1];o.useEffect((function(){var e=document.querySelector("body");return null==e||e.classList.add("noScroll"),function(){null==e||e.classList.remove("noScroll")}}),[]);var d=Object(g.a)({onSwipedLeft:function(){u("next"),n()},onSwipedRight:function(){u("prev"),i()}});return o.createElement("div",Object.assign({className:r},d),o.createElement(L,null,o.createElement(m,{onClick:function(){return a(f.a.actions.setPreview(void 0))}})),o.createElement(s,{item:t,transitionDirection:l},(function(e){return o.createElement(_,{previewImg:e})})))})).withConfig({componentId:"a8ygt-0"})(["background-color:rgba(0,0,0,.95);position:fixed;top:0px;left:0px;height:100vh;width:100%;z-index:100;"]),q=function(){return o.createElement(n.a,{position:"relative"},o.createElement(u.a,{mode:"light"}))},L=i.c.div.withConfig({componentId:"a8ygt-1"})(["position:absolute;width:100%;height:2rem;display:flex;justify-content:flex-end;z-index:2;"]),_=function(e){var t,r;return o.createElement(o.Fragment,null,"giphy"===(null===(t=e.previewImg)||void 0===t?void 0:t.imgProvider)&&o.createElement(j,{image:e.previewImg}),"pixabay"===(null===(r=e.previewImg)||void 0===r?void 0:r.imgProvider)&&o.createElement(O,{image:e.previewImg}))},M=i.c.div.withConfig({componentId:"sc-1cifx8y-0"})(["position:relative;display:flex;justify-content:center;align-items:center;min-width:500px;width:100%;height:100%;@media only screen and (max-width:","){&{min-width:200px;}}"],b.b.md),k=function(e){var t=Object(p.b)(),r=e.image.images.fixed_height_still,n=e.image.images.fixed_height_small_still,i={alt:e.image.title,defaultImgSrc:null==n?void 0:n.url,srcSet:[{src:null==r?void 0:r.url,media:"(min-width: 600px)"}]},a=function(){return t(f.a.actions.setPreview(e.imageIdx))};return o.createElement(E,{loadingPlaceholder:o.createElement(M,{children:o.createElement(u.a,null)}),imageProps:i,wrapper:function(t){return o.createElement(w,Object.assign({},t,{disable:e.disable,onClick:a}))}})};function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var C=function(e){var t=Object(p.b)(),r=N(o.useState(!1),2),n=r[0],i=r[1];return o.createElement(y,{loadingPlaceholder:o.createElement(M,{children:o.createElement(u.a,null)}),wrapper:function(e){return o.createElement(w,Object.assign({},e))},rootMargin:"600px 0px"},(function(e){return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e),n||(i(!0),t(f.a.actions.loadNextPage())),null}))},A=function(e){var t,r,n=e.image.previewURL,i=e.image.webformatURL.replace(/_\d{3}\./,"_180."),a={alt:null==e?void 0:null===(t=e.image)||void 0===t?void 0:null===(r=t.tags)||void 0===r?void 0:r.split(",").map((function(e){return e.trim()})).reduce((function(e,t){return"".concat(e," ").concat(t)}),""),defaultImgSrc:n,srcSet:[{src:i,media:"(min-width: 600px)"}]},c=Object(p.b)(),l=function(){return c(f.a.actions.setPreview(e.imageIdx))};return o.createElement(E,{loadingPlaceholder:o.createElement(M,{children:o.createElement(u.a,null)}),imageProps:a,wrapper:function(t){return o.createElement(w,Object.assign({},t,{disable:e.disable,onClick:l}))}})},R=Object(i.c)((function(e){var t,r=null===(t=e.images)||void 0===t?void 0:t.map((function(t,r){return"giphy"===t.imgProvider?o.createElement(k,{image:t,key:"giphy_".concat(t.id),disable:e.disable,imageIdx:r}):o.createElement(A,{image:t,key:"pixabay_".concat(t.id),disable:e.disable,imageIdx:r})}));return o.createElement("div",{className:e.className},r,e.canLoadMore&&o.createElement(C,{key:"loadMore_".concat(e.images.length,"_").concat(e.query.q)}))})).withConfig({componentId:"sc-1gevp32-0"})(["display:flex;flex-wrap:wrap;flex-direction:row;overflow-x:hidden;position:relative;left:0px;right:0px;margin:0px 10px;&::after{content:'';flex-grow:999999999;height:0;}"]),H=(r(139),r(205),r(110)),z=r(111),U=r(40),X=r(228),D=r.n(X),F=Object(i.c)(U.b).withConfig({componentId:"q2orlj-0"})(["width:100%;display:flex;flex-direction:row;padding:10px 10px;background-color:white;"]);function T(e,t,r,n,i,a,o){try{var c=e[a](o),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,i)}var J=function(e){return o.createElement(D.a,{style:{backgroundColor:"white",zIndex:10}},o.createElement(U.c,{initialValues:{q:e.query.q},onSubmit:(t=regeneratorRuntime.mark((function t(r,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.setSubmitting,e.onSearchSubmitted({q:r.q});case 2:case"end":return t.stop()}}),t)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function o(e){T(a,n,i,o,c,"next",e)}function c(e){T(a,n,i,o,c,"throw",e)}o(void 0)}))},function(e,t){return r.apply(this,arguments)})},(function(e){var t=e.isSubmitting;return o.createElement(F,null,o.createElement(U.a,{name:"q",as:z.a,"aria-label":"Search"}),o.createElement(H.a,{type:"submit",disabled:t,disableLeftBorder:!0},"Search"))})));var t,r};r(141),r(147),r(148),r(88),r(143),r(153),r(154),r(155),r(157),r(232);r(233),r(234),r(235);var Q=function(e,t){var r=+e.total;return Math.floor(r/t)+(r%t>0?1:0)},B=function(e,t){var r=+e.pagination.total_count||+e.pagination.count;return Math.floor(r/t)+(r%t>0?1:0)},V=r(236),G=r.n(V),K=r(120);function W(e,t,r,n,i,a,o){try{var c=e[a](o),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,i)}function Y(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){W(a,n,i,o,c,"next",e)}function c(e){W(a,n,i,o,c,"throw",e)}o(void 0)}))}}function Z(){return(Z=Y(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/api/images/query".concat(K.a.makeQueryFromMap(t)),e.abrupt("return",G.a.get(r));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ne=function(e){var t,r,n=(r=o.useRef(!0),o.useEffect((function(){return r.current=!0,function(){r.current=!1}}),[]),{isMounted:function(){return r.current}}).isMounted,i=Object(p.c)((function(e){return e.galleryItems})),a=i.loadingMeta,c=i.errors,l=i.images,u=Object(p.b)(),d=function(){var e,t;return n()&&(null==a?void 0:null===(e=a.query)||void 0===e?void 0:e.q)===(null===(t=s.current.query)||void 0===t?void 0:t.q)},s=o.useRef({query:{q:void 0},loadingsNo:0});o.useEffect((function(){u(f.a.actions.newQuery(e.query)),s.current.query=e.query,s.current.loadingsNo=0}),[e.query.q]),o.useEffect((function(){var t;void 0!==(null===(t=a.query)||void 0===t?void 0:t.q)&&ie(e,a,s,d,u)}),[null===(t=a.query)||void 0===t?void 0:t.q,a.pageIdx]);var m=void 0===(null==a?void 0:a.limit)||Math.max(a.limit.giphyPages,a.limit.pixabayPages)>((null==a?void 0:a.pageIdx)||0),g=s.current.loadingsNo>0;return{images:l,hasMorePages:m,pageIdx:null==a?void 0:a.pageIdx,isLoading:g,errors:c,triggerRefreshManually:function(){var t;d()&&void 0!==(null===(t=a.query)||void 0===t?void 0:t.q)&&ie(e,a,s,d,u)}}};function ie(e,t,r,n,i){var a=function(e,t){var r,n,i,a=t.pageIdx,o=function(e){return null==e?0:e>a?a:void 0};return{q:null==t?void 0:null===(r=t.query)||void 0===r?void 0:r.q,pixabay_offset:o(null===(n=t.limit)||void 0===n?void 0:n.pixabayPages)+"",giphy_offset:o(null===(i=t.limit)||void 0===i?void 0:i.giphyPages)+"",perPageLimit:e.perPageLimit+"",services:"both"}}(e,t);r.current.loadingsNo++,function(e){return Z.apply(this,arguments)}(a).then((function(t){if(n()){var a=t.data.providers.map((function(e){return"pixabay"===e.imgProvider?e.hits.map((function(t){return te({imgProvider:e.imgProvider},t)})):"giphy"===e.imgProvider?e.data.map((function(t){return te({imgProvider:e.imgProvider},t)})):[]})).reduce((function(e,t){return[].concat($(e),$(t))}),[]),o=function(e,t){var r={pixabayPages:0,giphyPages:0};return e.map((function(e){"pixabay"===e.imgProvider?r.pixabayPages=Q(e,t):"giphy"===e.imgProvider&&(r.giphyPages=B(e,t))})),r}(t.data.providers,e.perPageLimit);r.current.loadingsNo--,i(f.a.actions.itemsLoaded({images:a,limit:o}))}})).catch((function(e){var t;n()&&(t="string"==typeof e.message?[e.message]:[e.toString()],r.current.loadingsNo=0,i(f.a.actions.loadingErrors(t)))}))}t.default=function(e){var t={q:new URLSearchParams(e.routeProps.location.search).get("q")||void 0},r=Object(c.f)(),n=ne({perPageLimit:10,query:t}),i=n.images,a=n.isLoading,u=n.hasMorePages,d=n.errors,s=n.triggerRefreshManually,m=function(e){var t=Object(p.b)(),r=Object(p.c)((function(e){return e.galleryItems})),n=r.loadingMeta,i=r.images,a=r.previewIdx,o=void 0===(null==n?void 0:n.limit)||Math.max(n.limit.giphyPages,n.limit.pixabayPages)>((null==n?void 0:n.pageIdx)||0);return{previewIdx:a,previewPrevHandler:function(){t(f.a.actions.previewMove("prev"))},previewNextHandler:function(){i.length<(a||0)+e.perPageLimit&&o&&t(f.a.actions.loadNextPage()),t(f.a.actions.previewMove("next"))}}}({perPageLimit:10}),g=m.previewIdx,v=m.previewNextHandler,h=m.previewPrevHandler,y=d&&d.length>0;return o.createElement(o.Fragment,null,o.createElement(J,{query:t,onSearchSubmitted:function(e){e.q===t.q&&y&&s(),r.push(l.a.galleryUrl(e))}}),y&&o.createElement(ae,{errors:d}),!y&&i.length>0&&o.createElement(R,{images:i,canLoadMore:!a&&u,query:t,disable:void 0!==g}),void 0!==g&&o.createElement(I,{previewImg:i[g],previewNextHandler:v,previewPrevHandler:h}))};var ae=function(e){var t=e.errors;return o.createElement(n.a,{position:"relative"},o.createElement(a,null,t||"Unknown error"))}}}]);